# Lekcja: 3.2.1 Klasy i obiekty

# Czym jest klasa?

**Klasa** w C++ to szablon, ktÃ³ry okreÅ›la, jakie **dane** (pola) i **zachowania** (metody) bÄ™dÄ… miaÅ‚y obiekty stworzone na jej podstawie. WyobraÅº sobie klasÄ™ jako **plan narzÄ™dzia**, np. mÅ‚otka. Plan mÃ³wi, jakie cechy ma mieÄ‡ mÅ‚otek (np. waga, dÅ‚ugoÅ›Ä‡), ale sam w sobie nie jest mÅ‚otkiem. Dopiero na podstawie planu tworzysz konkretne narzÄ™dzia.

W programowaniu:
- Klasa definiuje dane (np. imiÄ™, zdrowie) i zachowania (np. witanie siÄ™, pokazywanie stanu).
- Klasa to **plan**, a obiekty to **konkretne egzemplarze** tego planu.

### Klasy jako zestawy rozwiÄ…zaÅ„

Klasy grupujÄ… powiÄ…zane dane i zachowania w logiczne zestawy, co uÅ‚atwia organizacjÄ™ kodu. PomyÅ›l o sklepie podzielonym na dziaÅ‚y: ogrodniczy, budowlany, spoÅ¼ywczy. KaÅ¼dy dziaÅ‚ ma swojÄ… specjalizacjÄ™. Podobnie klasy majÄ… jednÄ…, jasno okreÅ›lonÄ… odpowiedzialnoÅ›Ä‡ â€” np. klasa `Character` w grze zarzÄ…dza danymi postaci, ale nie zajmuje siÄ™ grafikÄ… czy fizykÄ…. DziÄ™ki temu kod jest przejrzysty i Å‚atwy do utrzymania.

---

## Czym jest obiekt?

**Obiekt** to konkretny egzemplarz klasy, nazywany takÅ¼e **instancjÄ…**. WracajÄ…c do przykÅ‚adu z narzÄ™dziami: klasa `Tool` to plan, a obiekty to konkretne narzÄ™dzia, np. `hammer` czy `saw`. KaÅ¼dy obiekt ma wÅ‚asne kopie danych (pÃ³l) zdefiniowanych w klasie i moÅ¼e uÅ¼ywaÄ‡ jej metod.

### Instancja i instancjowanie

- **Instancja**: To po prostu obiekt, czyli konkretny egzemplarz klasy.
- **Instancjowanie**: To proces tworzenia obiektu z klasy. Podczas instancjowania C++ automatycznie rezerwuje miejsce w pamiÄ™ci dla obiektu (tzw. **alokacja**), ale na tym etapie nie musisz siÄ™ tym martwiÄ‡.

---

## Metody vs. funkcje

DotÄ…d uÅ¼ywaÅ‚eÅ› **funkcji** â€” samodzielnych blokÃ³w kodu wykonujÄ…cych operacje. W OOP funkcje naleÅ¼Ä…ce do klasy nazywamy **metodami**. RÃ³Å¼nica jest prosta:
- **Funkcje** sÄ… niezaleÅ¼ne i niepowiÄ…zane z obiektami.
- **Metody** sÄ… czÄ™Å›ciÄ… klasy i operujÄ… na jej danych, np. metoda `sayHello()` moÅ¼e wyÅ›wietliÄ‡ imiÄ™ postaci.

Od teraz w kontekÅ›cie klas bÄ™dziemy mÃ³wiÄ‡ o **metodach**.

---

## Definiowanie klasy w C++

W C++ klasÄ™ definiujemy za pomocÄ… sÅ‚owa kluczowego `class`, po ktÃ³rym podajemy jej nazwÄ™. W nawiasach klamrowych `{}` umieszczamy:
- **Pola** (zmienne, czyli dane).
- **Metody** (funkcje, czyli zachowania).

Na koÅ„cu definicji klasy stawiamy **Å›rednik** (`;`), co jest wymagane w C++, w odrÃ³Å¼nieniu od wielu innych jÄ™zykÃ³w, takich jak Python czy Java. Åšrednik pomaga kompilatorowi zrozumieÄ‡, gdzie koÅ„czy siÄ™ definicja klasy.

### PrzykÅ‚ad: Klasa `Character`

StwÃ³rzmy klasÄ™ `Character` dla gry. PostaÄ‡ ma imiÄ™ i zdrowie, a takÅ¼e potrafi siÄ™ przywitaÄ‡ i pokazaÄ‡ swoje zdrowie.

```cpp
#include <iostream>
#include <string>

class Character {
private:
    std::string name;  // ImiÄ™ postaci
    int health;        // Zdrowie postaci

public:
    // Metody ustawiajÄ…ce i pobierajÄ…ce dane
    void setName(std::string newName) {
        name = newName;
    }

    std::string getName() {
        return name;
    }

    void setHealth(int newHealth) {
        health = newHealth;
    }

    int getHealth() {
        return health;
    }

    // Metody zachowaÅ„
    void sayHello() {
        std::cout << "Hello, I am " << name << "!" << std::endl;
    }

    void showStatus() {
        std::cout << name << " has " << health << " health." << std::endl;
    }
}; // Åšrednik na koÅ„cu jest wymagany w C++!
```

#### WyjaÅ›nienie:
- **Pola**: `name` (typ `std::string`) i `health` (typ `int`) przechowujÄ… dane postaci.
- **Specyfikatory dostÄ™pu**:
  - **`private:`**: Pola sÄ… ukryte i dostÄ™pne tylko wewnÄ…trz klasy. To chroni dane przed przypadkowÄ… zmianÄ… z zewnÄ…trz.
  - **`public:`**: Metody sÄ… dostÄ™pne z dowolnego miejsca, co pozwala kontrolowaÄ‡ dostÄ™p do pÃ³l.
- **Metody**: 
  - `setName()` i `setHealth()` ustawiajÄ… wartoÅ›ci pÃ³l (tzw. **settery**).
  - `getName()` i `getHealth()` zwracajÄ… wartoÅ›ci pÃ³l (tzw. **gettery**).
  - `sayHello()` i `showStatus()` pokazujÄ… zachowanie postaci.

#### Dlaczego uÅ¼ywamy getterÃ³w i setterÃ³w?
Nie naleÅ¼y zmieniaÄ‡ pÃ³l obiektu bezpoÅ›rednio (np. `player.name = "Aragorn"`), nawet jeÅ›li byÅ‚yby `public`. Zamiast tego uÅ¼ywamy metod `set` i `get`. Dlaczego?
- **Kontrola**: MoÅ¼emy sprawdzaÄ‡ dane przed ich zmianÄ… (np. upewniÄ‡ siÄ™, Å¼e zdrowie nie jest ujemne).
- **BezpieczeÅ„stwo**: UkrywajÄ…c pola, zapobiegamy przypadkowym bÅ‚Ä™dom.
- **ElastycznoÅ›Ä‡**: W przyszÅ‚oÅ›ci moÅ¼emy zmieniÄ‡ logikÄ™ w setterach (np. dodaÄ‡ logowanie), bez zmiany kodu uÅ¼ywajÄ…cego klasy.

PrzykÅ‚ad problemu bez setterÃ³w: jeÅ›li `health` byÅ‚oby `public`, ktoÅ› mÃ³gÅ‚by ustawiÄ‡ `player.health = -1000`, co nie ma sensu w grze. Z setterem moÅ¼emy to kontrolowaÄ‡:

```cpp
void setHealth(int newHealth) {
    if (newHealth >= 0) {
        health = newHealth;
    } else {
        health = 0; // Zapobiega ujemnemu zdrowiu
    }
}
```

---

## Tworzenie i uÅ¼ywanie obiektÃ³w

Aby stworzyÄ‡ obiekt (czyli instancjÄ™ klasy), deklarujemy zmiennÄ… typu klasy. Na przykÅ‚ad:

```cpp
Character player;
```

To proces **instancjowania** â€“ tworzymy konkretny obiekt na podstawie klasy `Character`. Teraz `player` ma swoje wÅ‚asne kopie pÃ³l `name` i `health` oraz moÅ¼e uÅ¼ywaÄ‡ metod klasy.

### DostÄ™p do pÃ³l i metod

Do pÃ³l i metod obiektu dostajemy siÄ™ za pomocÄ… operatora kropki (`.`). PoniewaÅ¼ pola sÄ… `private`, uÅ¼ywamy publicznych metod (getterÃ³w i setterÃ³w), aby je modyfikowaÄ‡ lub odczytywaÄ‡. KaÅ¼dy obiekt ma wÅ‚asne, niezaleÅ¼ne dane â€“ zmiana w jednym nie wpÅ‚ywa na inne.

```cpp
player.setName("Aragorn");
player.setHealth(100);
player.sayHello();      // WyÅ›wietli: Hello, I am Aragorn!
player.showStatus();    // WyÅ›wietli: Aragorn has 100 health.
```

---

## Praktyczny przykÅ‚ad: Wiele obiektÃ³w

W grze moÅ¼emy mieÄ‡ wiele postaci â€” kaÅ¼da to osobny obiekt z wÅ‚asnymi danymi. Zobaczmy to w praktyce:

```cpp
int main() {
    Character player;
    player.setName("Aragorn");
    player.setHealth(100);

    Character enemy;
    enemy.setName("Orc");
    enemy.setHealth(50);

    player.sayHello();      // Hello, I am Aragorn!
    enemy.sayHello();       // Hello, I am Orc!
    player.showStatus();    // Aragorn has 100 health.
    enemy.showStatus();     // Orc has 50 health.

    return 0;
}
```

- Tworzymy dwa obiekty: `player` i `enemy`.
- KaÅ¼dy ma wÅ‚asne `name` i `health`, mimo Å¼e korzystajÄ… z tej samej klasy.
- Operator `.` pozwala wywoÅ‚aÄ‡ metody na konkretnym obiekcie.

---

## Klasy w grach

W grach klasy i obiekty sÄ… podstawÄ…. Mamy wiele **instancji obiektÃ³w**, takich jak:
- Postacie (gracz, wrogowie).
- Bronie.
- Elementy interfejsu.

KaÅ¼da klasa ma swojÄ… odpowiedzialnoÅ›Ä‡: klasa `Character` zarzÄ…dza danymi i zachowaniami postaci, inne klasy odpowiadajÄ… za grafikÄ™, inne za fizykÄ™, a jeszcze inne za sterowanie. Taki podziaÅ‚ uÅ‚atwia organizacjÄ™ kodu w duÅ¼ych projektach, jak gry.

---

## Podsumowanie

- **Klasa**: Szablon definiujÄ…cy pola (dane) i metody (zachowania), zakoÅ„czony Å›rednikiem (`;`).
- **Obiekt**: Instancja klasy z wÅ‚asnymi danymi.
- **Metody**: Funkcje klasy operujÄ…ce na jej danych.
- **Instancjowanie**: Tworzenie obiektu z klasy.
- **DostÄ™p**: Operator `.` pozwala uÅ¼ywaÄ‡ metod; pola modyfikujemy przez settery, a odczytujemy przez gettery.
- Klasy porzÄ…dkujÄ… kod, co jest kluczowe w grach.

Gratulacje! Znasz podstawy klas i obiektÃ³w w C++. W kolejnych lekcjach rozwiniesz te umiejÄ™tnoÅ›ci, np. poznajÄ…c konstruktory.

---

## Zadania do wykonania

1. **StwÃ³rz klasÄ™ `Weapon`**:
   - Pola: `name` (`std::string`), `damage` (`int`), ustawione jako `private`.
   - Metody: `setName()`, `getName()`, `setDamage()`, `getDamage()`, `showDamage()` (wyÅ›wietla: "[name] deals [damage] damage.").
   - W `main`: StwÃ³rz obiekt, ustaw wartoÅ›ci i wywoÅ‚aj `showDamage()`.

2. **StwÃ³rz klasÄ™ `Player`**:
   - Pola: `name` (`std::string`), `health` (`int`), `experience` (`int`), ustawione jako `private`.
   - Metody: `setName()`, `getName()`, `setHealth()`, `getHealth()`, `gainExperience(int amount)` (zwiÄ™ksza doÅ›wiadczenie i wyÅ›wietla: "[name] gained [amount] experience.").
   - W `main`: StwÃ³rz obiekt, ustaw dane i wywoÅ‚aj `gainExperience(10)`.

3. **Rozszerz klasÄ™ `Character`**:
   - Dodaj metodÄ™ `attack(std::string target)` â€” wyÅ›wietla: "[name] attacks [target]!".
   - W `main`: StwÃ³rz dwie postacie, ustaw dane i wywoÅ‚aj `player.attack(enemy.getName())`.

---

Eksperymentuj z kodem i baw siÄ™ dobrze! JeÅ›li coÅ› jeszcze wymaga poprawki, daj znaÄ‡ â€“ lecimy z koksem! ğŸ˜„ C# pozdrawia z Unity! ğŸ˜‰